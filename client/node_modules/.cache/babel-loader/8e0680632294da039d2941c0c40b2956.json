{"ast":null,"code":"import { Param } from \"../../core/context/Param\";\nimport { ToneAudioNode } from \"../../core/context/ToneAudioNode\";\nimport { optionsFromArguments } from \"../../core/util/Defaults\";\nimport { readOnly } from \"../../core/util/Interface\";\n/**\n * Compressor is a thin wrapper around the Web Audio\n * [DynamicsCompressorNode](http://webaudio.github.io/web-audio-api/#the-dynamicscompressornode-interface).\n * Compression reduces the volume of loud sounds or amplifies quiet sounds\n * by narrowing or \"compressing\" an audio signal's dynamic range.\n * Read more on [Wikipedia](https://en.wikipedia.org/wiki/Dynamic_range_compression).\n * @example\n * const comp = new Tone.Compressor(-30, 3);\n * @category Component\n */\n\nexport class Compressor extends ToneAudioNode {\n  constructor() {\n    super(optionsFromArguments(Compressor.getDefaults(), arguments, [\"threshold\", \"ratio\"]));\n    this.name = \"Compressor\";\n    /**\n     * the compressor node\n     */\n\n    this._compressor = this.context.createDynamicsCompressor();\n    this.input = this._compressor;\n    this.output = this._compressor;\n    const options = optionsFromArguments(Compressor.getDefaults(), arguments, [\"threshold\", \"ratio\"]);\n    this.threshold = new Param({\n      minValue: this._compressor.threshold.minValue,\n      maxValue: this._compressor.threshold.maxValue,\n      context: this.context,\n      convert: false,\n      param: this._compressor.threshold,\n      units: \"decibels\",\n      value: options.threshold\n    });\n    this.attack = new Param({\n      minValue: this._compressor.attack.minValue,\n      maxValue: this._compressor.attack.maxValue,\n      context: this.context,\n      param: this._compressor.attack,\n      units: \"time\",\n      value: options.attack\n    });\n    this.release = new Param({\n      minValue: this._compressor.release.minValue,\n      maxValue: this._compressor.release.maxValue,\n      context: this.context,\n      param: this._compressor.release,\n      units: \"time\",\n      value: options.release\n    });\n    this.knee = new Param({\n      minValue: this._compressor.knee.minValue,\n      maxValue: this._compressor.knee.maxValue,\n      context: this.context,\n      convert: false,\n      param: this._compressor.knee,\n      units: \"decibels\",\n      value: options.knee\n    });\n    this.ratio = new Param({\n      minValue: this._compressor.ratio.minValue,\n      maxValue: this._compressor.ratio.maxValue,\n      context: this.context,\n      convert: false,\n      param: this._compressor.ratio,\n      units: \"positive\",\n      value: options.ratio\n    }); // set the defaults\n\n    readOnly(this, [\"knee\", \"release\", \"attack\", \"ratio\", \"threshold\"]);\n  }\n\n  static getDefaults() {\n    return Object.assign(ToneAudioNode.getDefaults(), {\n      attack: 0.003,\n      knee: 30,\n      ratio: 12,\n      release: 0.25,\n      threshold: -24\n    });\n  }\n  /**\n   * A read-only decibel value for metering purposes, representing the current amount of gain\n   * reduction that the compressor is applying to the signal. If fed no signal the value will be 0 (no gain reduction).\n   */\n\n\n  get reduction() {\n    return this._compressor.reduction;\n  }\n\n  dispose() {\n    super.dispose();\n\n    this._compressor.disconnect();\n\n    this.attack.dispose();\n    this.release.dispose();\n    this.threshold.dispose();\n    this.ratio.dispose();\n    this.knee.dispose();\n    return this;\n  }\n\n}","map":{"version":3,"sources":["../../../../Tone/component/dynamics/Compressor.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { Param } from \"../../core/context/Param\";\nimport { ToneAudioNode } from \"../../core/context/ToneAudioNode\";\nimport { optionsFromArguments } from \"../../core/util/Defaults\";\nimport { readOnly } from \"../../core/util/Interface\";\n/**\n * Compressor is a thin wrapper around the Web Audio\n * [DynamicsCompressorNode](http://webaudio.github.io/web-audio-api/#the-dynamicscompressornode-interface).\n * Compression reduces the volume of loud sounds or amplifies quiet sounds\n * by narrowing or \"compressing\" an audio signal's dynamic range.\n * Read more on [Wikipedia](https://en.wikipedia.org/wiki/Dynamic_range_compression).\n * @example\n * const comp = new Tone.Compressor(-30, 3);\n * @category Component\n */\nexport class Compressor extends ToneAudioNode {\n    constructor() {\n        super(optionsFromArguments(Compressor.getDefaults(), arguments, [\"threshold\", \"ratio\"]));\n        this.name = \"Compressor\";\n        /**\n         * the compressor node\n         */\n        this._compressor = this.context.createDynamicsCompressor();\n        this.input = this._compressor;\n        this.output = this._compressor;\n        const options = optionsFromArguments(Compressor.getDefaults(), arguments, [\"threshold\", \"ratio\"]);\n        this.threshold = new Param({\n            minValue: this._compressor.threshold.minValue,\n            maxValue: this._compressor.threshold.maxValue,\n            context: this.context,\n            convert: false,\n            param: this._compressor.threshold,\n            units: \"decibels\",\n            value: options.threshold,\n        });\n        this.attack = new Param({\n            minValue: this._compressor.attack.minValue,\n            maxValue: this._compressor.attack.maxValue,\n            context: this.context,\n            param: this._compressor.attack,\n            units: \"time\",\n            value: options.attack,\n        });\n        this.release = new Param({\n            minValue: this._compressor.release.minValue,\n            maxValue: this._compressor.release.maxValue,\n            context: this.context,\n            param: this._compressor.release,\n            units: \"time\",\n            value: options.release,\n        });\n        this.knee = new Param({\n            minValue: this._compressor.knee.minValue,\n            maxValue: this._compressor.knee.maxValue,\n            context: this.context,\n            convert: false,\n            param: this._compressor.knee,\n            units: \"decibels\",\n            value: options.knee,\n        });\n        this.ratio = new Param({\n            minValue: this._compressor.ratio.minValue,\n            maxValue: this._compressor.ratio.maxValue,\n            context: this.context,\n            convert: false,\n            param: this._compressor.ratio,\n            units: \"positive\",\n            value: options.ratio,\n        });\n        // set the defaults\n        readOnly(this, [\"knee\", \"release\", \"attack\", \"ratio\", \"threshold\"]);\n    }\n    static getDefaults() {\n        return Object.assign(ToneAudioNode.getDefaults(), {\n            attack: 0.003,\n            knee: 30,\n            ratio: 12,\n            release: 0.25,\n            threshold: -24,\n        });\n    }\n    /**\n     * A read-only decibel value for metering purposes, representing the current amount of gain\n     * reduction that the compressor is applying to the signal. If fed no signal the value will be 0 (no gain reduction).\n     */\n    get reduction() {\n        return this._compressor.reduction;\n    }\n    dispose() {\n        super.dispose();\n        this._compressor.disconnect();\n        this.attack.dispose();\n        this.release.dispose();\n        this.threshold.dispose();\n        this.ratio.dispose();\n        this.knee.dispose();\n        return this;\n    }\n}\n//# sourceMappingURL=Compressor.js.map"]},"metadata":{},"sourceType":"module"}